# 微信电信行业资讯推送机器人

> 基于 Wechaty 框架的微信机器人，每天定时推送电信行业最新资讯

## 功能特性

- 🤖 自动接入个人微信
- 📰 定时推送电信行业资讯（工信部、联通、反诈等）
- ⏰ 每日自动推送（可自定义时间）
- 💬 支持关键词自动回复
- 📱 支持命令触发获取即时资讯

## 环境要求

- Node.js >= 18.0.0
- npm 或 yarn

## 快速开始

### 1. 安装依赖

```bash
npm install
```

### 2. 配置环境变量

复制配置文件：

```bash
cp .env.example .env
```

编辑 `.env` 文件，填写以下配置：

```env
# 接收推送的用户微信号列表（填写对方的Wechat ID，多个用逗号分隔）
TARGET_USERS=wxid_xxxxx,wxid_yyyyy

# 推送时间配置
PUSH_HOUR=9
PUSH_MINUTE=0

# 每日推送条数
NEWS_COUNT=5
```

### 3. 启动机器人

```bash
# 开发模式
npm run dev

# 生产模式
npm start
```

### 4. 微信登录

启动后，终端会显示登录二维码。使用微信扫描二维码完成登录即可。

## 使用说明

### 命令列表

| 命令 | 说明 |
|------|------|
| `新闻` / `资讯` | 立即获取当日资讯 |
| `测试` | 测试机器人是否正常 |
| `帮助` | 查看帮助信息 |

### 关键词自动回复

- **工信部** - 工信部相关资讯
- **联通** - 中国联通动态
- **反诈** - 反诈防骗提示
- **5G** - 5G相关资讯
- **运营商** - 运营商动态
- **诈骗** - 防范诈骗提示

## 部署到云函数

### 方案一：阿里云函数计算

1. 创建函数，选择 Node.js 18 环境
2. 上传代码包（或使用容器镜像）
3. 配置环境变量
4. 设置定时触发器（Cron: 0 0 9 * * ?）

### 方案二：腾讯云云开发

1. 创建云函数
2. 上传代码
3. 配置定时触发器

### 方案三：自建服务器

```bash
# 使用 PM2 运行
pm2 start src/index.js --name telecom-bot

# 查看状态
pm2 status

# 查看日志
pm2 logs telecom-bot
```

## 项目结构

```
wechat-telecom-bot/
├── src/
│   ├── config.js     # 配置加载
│   ├── news.js       # 新闻爬取
│   ├── bot.js        # 微信机器人
│   └── index.js      # 主入口
├── .env.example      # 配置模板
├── package.json      # 依赖配置
└── README.md         # 说明文档
```

## 注意事项

1. **微信风控**：个人微信机器人可能被风控，建议使用新号或老号
2. **登录状态**：需要保持二维码登录状态，扫码一次后通常会保持登录
3. **云函数限制**：云函数是无状态的，微信机器人需要长连接，不适合直接在云函数运行
4. **推荐方案**：建议使用本地服务器或长期开机的电脑运行

## 常见问题

### Q: 扫码后提示登录失败

A: 微信限制了网页登录，建议检查是否有安全限制，或尝试更换网络环境。

### Q: 新闻爬取失败

A: 部分新闻源可能有反爬机制，检查网络连接是否正常。

### Q: 推送消息失败

A: 可能是对方删除了好友或消息发送受限，检查微信是否正常。

## 技术栈

- [Wechaty](https://wechaty.js.org/) - 微信机器人框架
- [Axios](https://axios-http.cn/) - HTTP 请求
- [Cheerio](https://cheerio.js.org/) - HTML 解析
- [Node-schedule](https://node-schedule.github.io/) - 定时任务

## 许可证

MIT License
